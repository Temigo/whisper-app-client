<div class="col-md-4">
<!-- Graph -->
<div class="panel panel-default">
	<div class="panel-heading">
		<h3 class="panel-title">Graph : {{ currentIndex }}</h3>
	</div>
    <div class="panel-body">
		<uib-tabset>
			<uib-tab>
				<uib-tab-heading>
					Nouveau
				</uib-tab-heading>
				<uib-accordion close-others="oneAtATime">
					<uib-accordion-group is-open="status.open">
						<uib-accordion-heading>
							<h4 class="panel-title">
                                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                    <span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span> Importer
                                </a>
								<i class="glyphicon pull-right" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
                            </h4>
						</uib-accordion-heading>
						<form class="form-horizontal" enctype="multipart/form-data">
							<!--{% csrf_token %}-->
							<!--<input type="file" nv-file-select uploader="uploader" name="import_graph" accept="application/*"/>
							<ul>
								<li ng-repeat="item in uploader.queue">
									<span ng-bind="item.file.name"></span><br/>
									<button class="btn btn-default" ng-click="item.upload()">Upload</button>
								</li>
							</ul>-->
							<!--<input type="file" ng-model="upload.src"/>
							<button class="btn btn-default" type="submit">Upload</button>
							File : {{upload.src}}-->
							<!--<button type="file" ngf-select="uploadFiles($file, $invalidFiles)">Upload</button>
							{{f}}-->
							Coming soon
						</form>
					</uib-accordion-group>
					<uib-accordion-group is-open="status.open2">
						<uib-accordion-heading>
							<h4 class="panel-title">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                    <span class="glyphicon glyphicon-cog" aria-hidden="true"></span> Générer
                                </a>
								<i class="glyphicon pull-right" ng-class="{'glyphicon-chevron-down': status.open2, 'glyphicon-chevron-right': !status.open2}"></i>
                            </h4>
						</uib-accordion-heading>
						<form class="form-horizontal" ng-submit="generateGraph(generationMethod, generateN)">
							<!--{% csrf_token %}-->
							<select class="form-control" name="generate_method" ng-model="generationMethod">
								<option value="1">Complete graph</option>
								<option value="2">Cycle graph</option>
								<option value="3">Circular ladder graph</option>
								<option value="4">Dorogovtsev_goltsev_mendes graph</option>
								<option value="5">Empty graph</option>
								<option value="6">Hypercube graph</option>
								<option value="7">Ladder graph</option>
								<option value="8">Path graph</option>
								<option value="9">Star graph</option>
								<option value="10">Wheel graph</option>
							</select>
							<div class="input-group">
								<span class="input-group-addon" id="sizing-addon">Valeur de n</span>
								<input ng-model="generateN" id="generate_n" name="generate_n" type="number" class="form-control" aria-describedby="sizing-addon"/>
							</div>
							<button class="btn btn-default" type="submit">OK</button>
						</form>
					</uib-accordion-group>
					<uib-accordion-group is-open="status.open3">
						<uib-accordion-heading>
							<h4 class="panel-title">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Créer
                                </a>
								<i class="glyphicon pull-right" ng-class="{'glyphicon-chevron-down': status.open3, 'glyphicon-chevron-right': !status.open3}"></i>
                            </h4>
						</uib-accordion-heading>
                        Coming soon !
					</uib-accordion-group>
			</uib-tab>
			<uib-tab>
				<uib-tab-heading>
					Existant
				</uib-tab-heading>
				<form class="form-horizontal">
	                <!-- {% csrf_token %} -->
	                <div class="form-group">
	                    <label for="graph_id" class="col-sm-2 control-label">Graph</label>
	                    <div class="col-sm-10">
	                        <select class="form-control" name="graph_id" ng-model="currentIndex" ng-options="parseInt(index) as graph.name for (index, graph) in graphList" ng-change="setCurrentIndex(currentIndex)">
	                            <!--<option value="">Choisir</option>-->
	                        </select>
	                        <p ng-if="graphList === []">No graphs are available.</p>
							Index : {{currentIndex}}
	                    </div>
	                </div>
	            </form>
			</uib-tab>
		</uib-tabset>
        </div>
    <div class="text-center">
    <form class="form-horizontal" method="post" action="/graph/export/graph/">
        <!--{% csrf_token %}-->
        <div class="form-actions">
            <button type="submit" class="btn btn-primary"><span class="glyphicon glyphicon-download" aria-hidden="true"></span> Export Graph (JSON)</button>
        </div>
    </form>
    </div>

</div>

<!-- Infection -->
<div class="panel panel-default">
	<div class="panel-heading"><h3 class="panel-title">Infection {{currentInfectionIndex}} for graph {{currentIndex}}</h3></div>
	<div class="panel-body">
		<uib-tabset>
			<uib-tab>
				<uib-tab-heading>
					Nouveau
				</uib-tab-heading>
				<uib-accordion>
					<uib-accordion-group is-open="status.open4">
						<uib-accordion-heading>
							<h4 class="panel-title">
								<a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOneInfection" aria-expanded="true" aria-controls="collapseOneInfection"><span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span> Importer</a>
								<i class="glyphicon pull-right" ng-class="{'glyphicon-chevron-down': status.open4, 'glyphicon-chevron-right': !status.open4}"></i>
							</h4>
						</uib-accordion-heading>
						<!--<form class="form-horizontal" method="post" action="/graph/import/infection" enctype="multipart/form-data">
							<input type="file" name="import_infection" accept="application/*"/>
							<button class="btn btn-default" type="submit">OK</button>
						</form>-->
						Coming soon
					</uib-accordion-group>
					<uib-accordion-group is-open="status.open5">
						<uib-accordion-heading>
							<h4 class="panel-title">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                    <span class="glyphicon glyphicon-cog" aria-hidden="true"></span> Générer
                                </a>
								<i class="glyphicon pull-right" ng-class="{'glyphicon-chevron-down': status.open5, 'glyphicon-chevron-right': !status.open5}"></i>
                            </h4>
						</uib-accordion-heading>
						<form class="form-horizontal" ng-submit="generateGraph(generationInfectionMethod, generateInfectionN, true)">
							<!--{% csrf_token %}-->
							<select class="form-control" name="generate_method" ng-model="generationInfectionMethod">
								<option value="1">Complete graph</option>
								<option value="2">Cycle graph</option>
								<option value="3">Circular ladder graph</option>
								<option value="4">Dorogovtsev_goltsev_mendes graph</option>
								<option value="5">Empty graph</option>
								<option value="6">Hypercube graph</option>
								<option value="7">Ladder graph</option>
								<option value="8">Path graph</option>
								<option value="9">Star graph</option>
								<option value="10">Wheel graph</option>
							</select>
							<div class="input-group">
								<span class="input-group-addon" id="sizing-addon">Valeur de n</span>
								<input ng-model="generateInfectionN" id="generate_n" name="generate_n" type="number" class="form-control" aria-describedby="sizing-addon"/>
							</div>
							<input type="hidden" name="request" value="new_graph"/>
							<button class="btn btn-default" type="submit">OK</button>
						</form>
					</uib-accordion-group>
				</uib-accordion>
			</uib-tab>
			<uib-tab>
				<uib-tab-heading>
					Existant
				</uib-tab-heading>
				<form class="form-horizontal">
	                <!-- {% csrf_token %} -->
	                <div class="form-group">
	                    <label for="infection_id" class="col-sm-2 control-label">Infection</label>
	                    <div class="col-sm-10">
	                        <select class="form-control" name="infection_id" ng-model="currentInfectionIndex" ng-options="parseInt(index) as infection.name for (index, infection) in infectionList" ng-change="setCurrentInfectionIndex(currentInfectionIndex)">
	                            <!--<option value="">Choisir</option>-->
	                        </select>
	                        <p ng-if="infectionList === []">No infection graphs are available.</p>
	                    </div>
	                </div>
	            </form>
			</uib-tab>
		</uib-tabset>

		<!-- Export infection -->
		<div class="text-center">
			<form class="form-horizontal" method="post" action="/graph/export/infection/">
				<!--{% csrf_token %}-->
				<div class="form-actions">
					<button type="submit" class="btn btn-primary">
						<span class="glyphicon glyphicon-download" aria-hidden="true"></span>
						Export Infection (JSON)
					</button>
				</div>
			</form>
		</div>
	</div>
</div>

<!-- Algorithm -->
<div class="panel panel-default">
	<div class="panel-heading"><h3 class="panel-title">Choose Algorithm</h3></div>
	<div class="panel-body">
		<div class="text-center">
			<!--<form class="form-horizontal" method="post" action="/graph/import/algorithm/" enctype="multipart/form-data">
				<div class="form-actions">
					<input type="file" name="import_algorithm" accept="application/*"/>
					<button type="submit" class="btn btn-primary">
						<span class="glyphicon glyphicon-download" aria-hidden="true"></span>
						Import Algorithm (*.py)
					</button>
				</div>
			</form>-->
			Coming soon
		</div>
	</div>
</div>
</div>

<!-- Canvas with graph drawing -->
<div class="col-md-7" id="canvas" style="position:relative;">
	{{currentGraph}}
	<!--<md-fab-toolbar md-direction="left">
		<md-fab-trigger>
			<md-button class="md-fab md-primary">
				<md-icon>settings</md-icon>
			</md-button>
		</md-fab-trigger>
		<md-toolbar>
			<md-fab-actions class="md-toolbar-tools">
				<md-button class="md-icon-button">
					<md-icon>control_point</md-icon>
				</md-button>
			</md-fab-actions>
		</md-toolbar>
	</md-fab-toolbar>-->

	<md-fab-speed-dial class="md-fling md-fab-top-right" md-direction="left">
		<md-fab-trigger>
			<md-button class="md-fab md-primary">
				<md-tooltip md-direction="top">Settings</md-tooltip>
				<md-icon>settings</md-icon>
			</md-button>
		</md-fab-trigger>
		<!--<md-toolbar>-->
			<md-fab-actions>
				<md-button class="md-fab md-raised md-mini" ng-click="addNode()">
					<md-tooltip md-direction="top">Add a node</md-tooltip>
					<md-icon>add</md-icon>
				</md-button>
				<md-button class="md-fab md-raised md-mini">
					<md-tooltip md-direction="top">Display</md-tooltip>
					<md-icon>timeline</md-icon>
				</md-button>
			</md-fab-actions>
		<!--</md-toolbar>-->
	</md-fab-speed-dial>

    <d3graph graph-data="currentGraph" infection-data="currentInfection"></d3graph>

</div>

</div>
